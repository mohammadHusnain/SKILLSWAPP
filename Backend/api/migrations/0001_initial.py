# Generated by Django 4.2.25 on 2025-11-28 04:36

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Subscription',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_id', models.CharField(help_text='MongoDB ObjectId of the user', max_length=24)),
                ('stripe_customer_id', models.CharField(help_text='Stripe customer ID', max_length=255)),
                ('stripe_subscription_id', models.CharField(help_text='Stripe subscription ID', max_length=255, unique=True)),
                ('plan_type', models.CharField(choices=[('premium', 'Premium'), ('basic', 'Basic')], default='premium', help_text='Subscription plan type', max_length=20)),
                ('status', models.CharField(choices=[('active', 'Active'), ('canceled', 'Canceled'), ('past_due', 'Past Due'), ('unpaid', 'Unpaid')], default='active', help_text='Subscription status', max_length=20)),
                ('current_period_start', models.DateTimeField(help_text='Current billing period start')),
                ('current_period_end', models.DateTimeField(help_text='Current billing period end')),
                ('cancel_at_period_end', models.BooleanField(default=False, help_text='Whether subscription will cancel at period end')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Subscription creation timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Subscription last update timestamp')),
            ],
            options={
                'verbose_name': 'Subscription',
                'verbose_name_plural': 'Subscriptions',
                'db_table': 'subscriptions',
                'indexes': [models.Index(fields=['user_id'], name='subscriptio_user_id_aa8bc6_idx'), models.Index(fields=['stripe_subscription_id'], name='subscriptio_stripe__aa726e_idx'), models.Index(fields=['status'], name='subscriptio_status_572d44_idx')],
            },
        ),
        migrations.CreateModel(
            name='Session',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('teacher_id', models.CharField(help_text='MongoDB ObjectId of the teacher', max_length=24)),
                ('learner_id', models.CharField(help_text='MongoDB ObjectId of the learner', max_length=24)),
                ('skill_taught', models.CharField(help_text='Skill being taught', max_length=100)),
                ('skill_learned', models.CharField(help_text='Skill being learned', max_length=100)),
                ('scheduled_date', models.DateField(help_text='Date of session (YYYY-MM-DD)')),
                ('scheduled_time', models.TimeField(help_text='Time of session (HH:MM)')),
                ('duration_minutes', models.IntegerField(default=60, help_text='Session duration in minutes (1-480)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(480)])),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('accepted', 'Accepted'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', help_text='Session status', max_length=20)),
                ('notes', models.TextField(blank=True, help_text='Session notes/description')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Session creation timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Session last update timestamp')),
            ],
            options={
                'verbose_name': 'Session',
                'verbose_name_plural': 'Sessions',
                'db_table': 'sessions',
                'indexes': [models.Index(fields=['teacher_id'], name='sessions_teacher_722c4f_idx'), models.Index(fields=['learner_id'], name='sessions_learner_cdc2db_idx'), models.Index(fields=['status'], name='sessions_status_2c94db_idx'), models.Index(fields=['scheduled_date', 'scheduled_time'], name='sessions_schedul_381673_idx')],
            },
        ),
        migrations.CreateModel(
            name='Profile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_id', models.CharField(help_text='MongoDB ObjectId of the user', max_length=24, unique=True)),
                ('name', models.CharField(help_text="User's display name", max_length=255)),
                ('bio', models.TextField(blank=True, help_text="User's bio/description", max_length=1000)),
                ('avatar_url', models.URLField(blank=True, help_text="URL to user's avatar image", null=True)),
                ('resume_url', models.URLField(blank=True, help_text="URL to user's resume", null=True)),
                ('skills_offered', models.JSONField(default=list, help_text='List of skills user can teach (1-10 items)')),
                ('skills_wanted', models.JSONField(default=list, help_text='List of skills user wants to learn (1-10 items)')),
                ('location', models.JSONField(blank=True, default=dict, help_text='Location object with city, country, and optional coordinates')),
                ('availability', models.JSONField(blank=True, default=list, help_text='List of availability periods')),
                ('timezone', models.CharField(default='UTC', help_text="User's timezone", max_length=50)),
                ('rating', models.FloatField(default=0.0, help_text="User's rating (0-5)", validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(5.0)])),
                ('total_matches', models.IntegerField(default=0, help_text='Total number of matches')),
                ('total_teaching_sessions', models.IntegerField(default=0, help_text='Total teaching sessions')),
                ('total_learning_sessions', models.IntegerField(default=0, help_text='Total learning sessions')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Profile creation timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Profile last update timestamp')),
            ],
            options={
                'verbose_name': 'Profile',
                'verbose_name_plural': 'Profiles',
                'db_table': 'profiles',
                'indexes': [models.Index(fields=['user_id'], name='profiles_user_id_29277a_idx'), models.Index(fields=['skills_offered'], name='profiles_skills__a095a0_idx'), models.Index(fields=['skills_wanted'], name='profiles_skills__b1c824_idx'), models.Index(fields=['rating'], name='profiles_rating_e1dd3d_idx'), models.Index(fields=['created_at'], name='profiles_created_cbafd1_idx')],
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transaction_type', models.CharField(choices=[('subscription', 'Subscription'), ('tip', 'Tip'), ('premium', 'Premium')], help_text='Type of transaction', max_length=20)),
                ('from_user_id', models.CharField(help_text='MongoDB ObjectId of user who paid', max_length=24)),
                ('to_user_id', models.CharField(blank=True, help_text='MongoDB ObjectId of user who received payment (None for subscriptions)', max_length=24, null=True)),
                ('amount', models.DecimalField(decimal_places=2, help_text='Payment amount in USD', max_digits=10, validators=[django.core.validators.MinValueValidator(0.01)])),
                ('currency', models.CharField(default='usd', help_text='Currency code', max_length=3)),
                ('stripe_payment_intent_id', models.CharField(blank=True, help_text='Stripe payment intent ID', max_length=255, null=True)),
                ('stripe_session_id', models.CharField(blank=True, help_text='Stripe checkout session ID', max_length=255, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('completed', 'Completed'), ('failed', 'Failed'), ('refunded', 'Refunded')], default='pending', help_text='Transaction status', max_length=20)),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='Additional metadata')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Transaction creation timestamp')),
                ('completed_at', models.DateTimeField(blank=True, help_text='Transaction completion timestamp', null=True)),
            ],
            options={
                'verbose_name': 'Payment',
                'verbose_name_plural': 'Payments',
                'db_table': 'payments',
                'indexes': [models.Index(fields=['from_user_id'], name='payments_from_us_1745e2_idx'), models.Index(fields=['to_user_id'], name='payments_to_user_a6135e_idx'), models.Index(fields=['stripe_session_id'], name='payments_stripe__4904cc_idx'), models.Index(fields=['transaction_type'], name='payments_transac_a44a7c_idx'), models.Index(fields=['status'], name='payments_status_d621e5_idx'), models.Index(fields=['created_at'], name='payments_created_e3a130_idx')],
            },
        ),
        migrations.CreateModel(
            name='PartialUser',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('temp_user_id', models.CharField(help_text='Temporary user ID', max_length=255, unique=True)),
                ('firstName', models.CharField(help_text="User's first name", max_length=100)),
                ('lastName', models.CharField(help_text="User's last name", max_length=100)),
                ('phoneNumber', models.CharField(help_text="User's phone number", max_length=20)),
                ('address', models.TextField(help_text="User's address")),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Partial user creation timestamp')),
                ('expires_at', models.DateTimeField(help_text='Expiration timestamp (24 hours from creation)')),
            ],
            options={
                'verbose_name': 'Partial User',
                'verbose_name_plural': 'Partial Users',
                'db_table': 'partial_users',
                'indexes': [models.Index(fields=['temp_user_id'], name='partial_use_temp_us_a86734_idx'), models.Index(fields=['expires_at'], name='partial_use_expires_48abb0_idx')],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_id', models.CharField(help_text='MongoDB ObjectId of the user', max_length=24)),
                ('type', models.CharField(choices=[('new_message', 'New Message'), ('payment_success', 'Payment Success'), ('payment_received', 'Payment Received'), ('subscription_updated', 'Subscription Updated'), ('session_request', 'Session Request'), ('session_accept', 'Session Accepted'), ('session_reject', 'Session Rejected')], help_text='Type of notification', max_length=30)),
                ('title', models.CharField(help_text='Notification title', max_length=255)),
                ('body', models.TextField(help_text='Notification body/message')),
                ('related_id', models.CharField(blank=True, help_text='MongoDB ObjectId reference to related entity (conversation, payment, etc.)', max_length=24, null=True)),
                ('is_read', models.BooleanField(default=False, help_text='Whether notification has been read')),
                ('read_at', models.DateTimeField(blank=True, help_text='Timestamp when notification was read', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Notification creation timestamp')),
            ],
            options={
                'verbose_name': 'Notification',
                'verbose_name_plural': 'Notifications',
                'db_table': 'notifications',
                'indexes': [models.Index(fields=['user_id', 'created_at'], name='notificatio_user_id_7336fd_idx'), models.Index(fields=['user_id', 'is_read'], name='notificatio_user_id_a4dd5c_idx'), models.Index(fields=['created_at'], name='notificatio_created_e4c995_idx')],
            },
        ),
        migrations.CreateModel(
            name='Message',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('conversation_id', models.CharField(help_text='MongoDB ObjectId of the conversation', max_length=24)),
                ('sender_id', models.CharField(help_text='MongoDB ObjectId of the message sender', max_length=24)),
                ('text', models.TextField(help_text='Message content')),
                ('attachments', models.JSONField(blank=True, default=list, help_text='List of attachment URLs')),
                ('timestamp', models.DateTimeField(auto_now_add=True, help_text='Message timestamp')),
                ('is_read', models.BooleanField(default=False, help_text='Whether message has been read')),
                ('read_at', models.DateTimeField(blank=True, help_text='Timestamp when message was read', null=True)),
                ('is_edited', models.BooleanField(default=False, help_text='Whether message has been edited')),
                ('edited_at', models.DateTimeField(blank=True, help_text='Timestamp when message was edited', null=True)),
                ('is_deleted', models.BooleanField(default=False, help_text='Whether message has been deleted')),
                ('deleted_at', models.DateTimeField(blank=True, help_text='Timestamp when message was deleted', null=True)),
            ],
            options={
                'verbose_name': 'Message',
                'verbose_name_plural': 'Messages',
                'db_table': 'messages',
                'indexes': [models.Index(fields=['conversation_id'], name='messages_convers_8904b4_idx'), models.Index(fields=['conversation_id', 'timestamp'], name='messages_convers_31a2d0_idx'), models.Index(fields=['sender_id'], name='messages_sender__6ae55a_idx'), models.Index(fields=['timestamp'], name='messages_timesta_ab821b_idx'), models.Index(fields=['is_read'], name='messages_is_read_6a69c0_idx')],
            },
        ),
        migrations.CreateModel(
            name='Match',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_id', models.CharField(help_text='MongoDB ObjectId of the user', max_length=24)),
                ('matched_user_id', models.CharField(help_text='MongoDB ObjectId of the matched user', max_length=24)),
                ('match_score', models.FloatField(help_text='Match score (0-100)', validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(100.0)])),
                ('interest_status', models.CharField(choices=[('none', 'None'), ('pending', 'Pending'), ('accepted', 'Accepted'), ('rejected', 'Rejected')], default='none', help_text='Interest status between users', max_length=20)),
                ('interested_by', models.CharField(blank=True, help_text='MongoDB ObjectId of user who expressed interest', max_length=24, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Match creation timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Match last update timestamp')),
            ],
            options={
                'verbose_name': 'Match',
                'verbose_name_plural': 'Matches',
                'db_table': 'matches',
                'indexes': [models.Index(fields=['user_id'], name='matches_user_id_175a6a_idx'), models.Index(fields=['matched_user_id'], name='matches_matched_acd543_idx'), models.Index(fields=['user_id', 'match_score'], name='matches_user_id_84097f_idx'), models.Index(fields=['interest_status'], name='matches_interes_689a0c_idx')],
                'unique_together': {('user_id', 'matched_user_id')},
            },
        ),
        migrations.CreateModel(
            name='Conversation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('participants', models.JSONField(default=list, help_text='List of MongoDB ObjectIds of conversation participants (exactly 2)')),
                ('last_message', models.TextField(blank=True, help_text='Text of the last message')),
                ('last_message_timestamp', models.DateTimeField(blank=True, help_text='Timestamp of the last message', null=True)),
                ('unread_counts', models.JSONField(default=dict, help_text='Dictionary mapping user_id to unread message count')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Conversation creation timestamp')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='Conversation last update timestamp')),
            ],
            options={
                'verbose_name': 'Conversation',
                'verbose_name_plural': 'Conversations',
                'db_table': 'conversations',
                'indexes': [models.Index(fields=['participants'], name='conversatio_partici_3ac210_idx'), models.Index(fields=['updated_at'], name='conversatio_updated_8d1310_idx')],
            },
        ),
        migrations.CreateModel(
            name='Token',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('token', models.CharField(help_text='Hashed token value', max_length=64, unique=True)),
                ('token_type', models.CharField(choices=[('email_verification', 'Email Verification'), ('password_reset', 'Password Reset')], help_text='Type of token', max_length=20)),
                ('email', models.EmailField(help_text='Email associated with the token', max_length=254)),
                ('used', models.BooleanField(default=False, help_text='Whether token has been used')),
                ('used_at', models.DateTimeField(blank=True, help_text='Timestamp when token was used', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Token creation timestamp')),
                ('expires_at', models.DateTimeField(help_text='Token expiration timestamp')),
                ('django_user', models.ForeignKey(help_text='Link to Django User model', on_delete=django.db.models.deletion.CASCADE, related_name='tokens', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Token',
                'verbose_name_plural': 'Tokens',
                'db_table': 'tokens',
                'indexes': [models.Index(fields=['token'], name='tokens_token_57b770_idx'), models.Index(fields=['django_user'], name='tokens_django__ac7269_idx'), models.Index(fields=['token_type'], name='tokens_token_t_a8e19e_idx'), models.Index(fields=['expires_at'], name='tokens_expires_288ad1_idx')],
            },
        ),
        migrations.CreateModel(
            name='MongoUser',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email', models.EmailField(help_text='User email address', max_length=254, unique=True)),
                ('name', models.CharField(help_text="User's display name", max_length=255)),
                ('avatar_url', models.URLField(blank=True, help_text="URL to user's avatar image", null=True)),
                ('phoneNumber', models.CharField(blank=True, help_text="User's phone number", max_length=20, null=True)),
                ('address', models.TextField(blank=True, help_text="User's address", null=True)),
                ('is_verified', models.BooleanField(default=True, help_text='Whether user email is verified')),
                ('profile_completed', models.BooleanField(default=False, help_text='Whether user has completed profile setup')),
                ('roles', models.JSONField(default=list, help_text="User roles (e.g., 'user', 'admin')")),
                ('skills_teaching', models.JSONField(default=list, help_text='Skills user can teach')),
                ('skills_learning', models.JSONField(default=list, help_text='Skills user wants to learn')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='Account creation timestamp')),
                ('last_seen', models.DateTimeField(auto_now=True, help_text='Last activity timestamp')),
                ('django_user', models.ForeignKey(help_text='Link to Django User model', on_delete=django.db.models.deletion.CASCADE, related_name='mongo_profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'MongoDB User',
                'verbose_name_plural': 'MongoDB Users',
                'db_table': 'mongo_users',
                'indexes': [models.Index(fields=['email'], name='mongo_users_email_c61a3c_idx'), models.Index(fields=['django_user'], name='mongo_users_django__6bbc34_idx'), models.Index(fields=['created_at'], name='mongo_users_created_3d4ee7_idx'), models.Index(fields=['last_seen'], name='mongo_users_last_se_83dd13_idx')],
            },
        ),
    ]
